import{j as e}from"./radix-ui-core-CVbt7vjv.js";import{c as r,h as C}from"./react-vendor-CF8XAmli.js";import{u as M,m as l}from"./index-SAJX4igD.js";import{c as T,D as w,k as P,J as $,L as N,K as D,p as F,e as I}from"./other-ui-8Y7Mtx8D.js";import"./supabase-vendor-D5o4eRXO.js";import"./motion-vendor-gX53-bda.js";function U(){const[d,v]=r.useState(""),[c,h]=r.useState(""),[m,k]=r.useState(!1),[p,i]=r.useState(""),[n,f]=r.useState(!1),[u,g]=r.useState(0),{login:S,isAuthenticated:j,loginAttempts:x,isLocked:s,lockoutTime:b}=M(),o=C(),y=5;r.useEffect(()=>{j&&o("/admin")},[j,o]),r.useEffect(()=>{if(s&&b){const a=setInterval(()=>{const t=Math.ceil((b-Date.now())/1e3);t>0?g(t):g(0)},1e3);return()=>clearInterval(a)}},[s,b]);const E=async a=>{if(a.preventDefault(),i(""),s){i(`Account terkunci. Coba lagi dalam ${u} detik.`);return}if(!d||!c){i("Email dan password harus diisi");return}f(!0);try{const t=await S(d,c);t.success?o("/admin"):(i(t.error||"Login gagal"),h(""))}catch{i("Terjadi kesalahan saat login")}finally{f(!1)}},A=a=>{const t=Math.floor(a/60),L=a%60;return`${t}:${L.toString().padStart(2,"0")}`};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary/10 via-background to-secondary/10 pt-20 flex items-center justify-center",children:e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-12",children:e.jsxs(l.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6},className:"max-w-md mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx(l.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring"},className:"inline-flex items-center justify-center w-16 h-16 bg-primary rounded-2xl mb-4",children:e.jsx(T,{className:"h-8 w-8 text-white"})}),e.jsx("h1",{className:"mb-2",children:"Admin Login"}),e.jsx("p",{className:"text-muted-foreground",children:"Masuk ke dashboard admin Lapak Android"})]}),e.jsxs(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-card rounded-2xl shadow-xl border border-border p-8",children:[p&&e.jsxs(l.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:`mb-6 p-4 rounded-xl flex items-start gap-3 ${s?"bg-red-500/10 text-red-500 border border-red-500/20":"bg-amber-500/10 text-amber-500 border border-amber-500/20"}`,children:[e.jsx(w,{className:"h-5 w-5 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:p}),s&&u>0&&e.jsxs("div",{className:"mt-2 flex items-center gap-2 text-xs",children:[e.jsx(P,{className:"h-4 w-4"}),e.jsxs("span",{children:["Waktu tersisa: ",A(u)]})]})]})]}),x>0&&!s&&e.jsxs("div",{className:"mb-6 p-4 bg-amber-500/10 border border-amber-500/20 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-amber-600 dark:text-amber-500",children:[e.jsx(w,{className:"h-4 w-4"}),e.jsxs("span",{children:["Percobaan login: ",x,"/",y]})]}),e.jsx("div",{className:"mt-2 w-full bg-muted rounded-full h-2",children:e.jsx("div",{className:"bg-amber-500 h-2 rounded-full transition-all duration-300",style:{width:`${x/y*100}%`}})})]}),e.jsxs("form",{onSubmit:E,className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-2",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx($,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground"}),e.jsx("input",{type:"email",value:d,onChange:a=>v(a.target.value),disabled:s||n,placeholder:"Masukkan email",className:"w-full pl-12 pr-4 py-3.5 bg-background border border-border rounded-xl focus:outline-none focus:ring-2 focus:ring-primary transition-all disabled:opacity-50 disabled:cursor-not-allowed"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-2",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(N,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground"}),e.jsx("input",{type:m?"text":"password",value:c,onChange:a=>h(a.target.value),disabled:s||n,placeholder:"Masukkan password",className:"w-full pl-12 pr-12 py-3.5 bg-background border border-border rounded-xl focus:outline-none focus:ring-2 focus:ring-primary transition-all disabled:opacity-50 disabled:cursor-not-allowed"}),e.jsx("button",{type:"button",onClick:()=>k(!m),disabled:s||n,className:"absolute right-4 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors disabled:opacity-50",children:m?e.jsx(D,{className:"h-5 w-5"}):e.jsx(F,{className:"h-5 w-5"})})]})]}),e.jsx("button",{type:"submit",disabled:s||n,className:"w-full py-3.5 bg-primary text-white rounded-xl hover:bg-primary/90 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:n?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),e.jsx("span",{children:"Memverifikasi..."})]}):s?e.jsxs(e.Fragment,{children:[e.jsx(N,{className:"h-5 w-5"}),e.jsx("span",{children:"Account Terkunci"})]}):e.jsxs(e.Fragment,{children:[e.jsx(I,{className:"h-5 w-5"}),e.jsx("span",{children:"Login"})]})})]})]}),e.jsx(l.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},className:"text-center mt-6",children:e.jsx("button",{onClick:()=>o("/"),className:"text-muted-foreground hover:text-primary transition-colors",children:"‚Üê Kembali ke Website"})})]})})})}export{U as LoginPage};
