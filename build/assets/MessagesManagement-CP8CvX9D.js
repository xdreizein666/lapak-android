import{j as e}from"./radix-ui-core-CVbt7vjv.js";import{h as N,c as m}from"./react-vendor-CF8XAmli.js";import{a0 as y,s as f,O as v,J as w,m as C,P as k,i as S,a4 as L,t as o}from"./other-ui-8Y7Mtx8D.js";import{u as M}from"./useContact-DqvQFIWc.js";import{m as l}from"./index-B7e89noG.js";import"./supabase-vendor-D5o4eRXO.js";import"./motion-vendor-gX53-bda.js";function F(){const x=N(),[t,u]=m.useState(""),[a,n]=m.useState("all"),{messages:r,loading:h,updateMessageStatus:p,deleteMessage:b}=M({autoFetch:!0}),g=async s=>{if(confirm("Apakah Anda yakin ingin menghapus pesan ini?"))try{await b(s),o.success("Pesan berhasil dihapus")}catch(d){o.error("Gagal menghapus pesan"),console.error(d)}},j=async(s,d)=>{try{await p(s,d),o.success("Status pesan diupdate")}catch(c){o.error("Gagal update status"),console.error(c)}},i=r.filter(s=>{const d=s.name.toLowerCase().includes(t.toLowerCase())||s.email.toLowerCase().includes(t.toLowerCase())||s.brand.toLowerCase().includes(t.toLowerCase())||s.message.toLowerCase().includes(t.toLowerCase()),c=a==="all"||s.status===a;return d&&c});return e.jsx("div",{className:"min-h-screen bg-muted/30 pt-20",children:e.jsxs("div",{className:"max-w-7xl mx-auto p-6 lg:p-8",children:[e.jsxs(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8",children:[e.jsxs("button",{onClick:()=>x("/admin"),className:"flex items-center gap-2 text-muted-foreground hover:text-foreground mb-4 transition-colors",children:[e.jsx(y,{className:"h-5 w-5"}),e.jsx("span",{children:"Back to Dashboard"})]}),e.jsxs("div",{children:[e.jsx("h1",{className:"mb-2",children:"Contact Messages"}),e.jsx("p",{className:"text-muted-foreground",children:"Kelola semua pesan masuk dari form kontak"})]})]}),e.jsxs(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-card rounded-2xl p-6 border border-border",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Total Messages"}),e.jsx("h3",{className:"text-3xl mb-1",children:r.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"All messages"})]}),e.jsxs("div",{className:"bg-card rounded-2xl p-6 border border-border",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"New"}),e.jsx("h3",{className:"text-3xl mb-1 text-primary",children:r.filter(s=>s.status==="new").length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Unread messages"})]}),e.jsxs("div",{className:"bg-card rounded-2xl p-6 border border-border",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Read"}),e.jsx("h3",{className:"text-3xl mb-1 text-amber-600",children:r.filter(s=>s.status==="read").length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Read messages"})]}),e.jsxs("div",{className:"bg-card rounded-2xl p-6 border border-border",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Replied"}),e.jsx("h3",{className:"text-3xl mb-1 text-green-600",children:r.filter(s=>s.status==="replied").length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Responded"})]})]}),e.jsxs(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"mb-6 space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(f,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground"}),e.jsx("input",{type:"text",value:t,onChange:s=>u(s.target.value),placeholder:"Search messages by name, email, brand, or content...",className:"w-full pl-12 pr-4 py-3 bg-card border border-border rounded-xl focus:outline-none focus:ring-2 focus:ring-primary"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>n("all"),className:`px-4 py-2 rounded-xl transition-all ${a==="all"?"bg-primary text-white":"bg-card border border-border hover:bg-muted"}`,children:["All (",r.length,")"]}),e.jsxs("button",{onClick:()=>n("new"),className:`px-4 py-2 rounded-xl transition-all ${a==="new"?"bg-primary text-white":"bg-card border border-border hover:bg-muted"}`,children:["New (",r.filter(s=>s.status==="new").length,")"]}),e.jsxs("button",{onClick:()=>n("read"),className:`px-4 py-2 rounded-xl transition-all ${a==="read"?"bg-amber-600 text-white":"bg-card border border-border hover:bg-muted"}`,children:["Read (",r.filter(s=>s.status==="read").length,")"]}),e.jsxs("button",{onClick:()=>n("replied"),className:`px-4 py-2 rounded-xl transition-all ${a==="replied"?"bg-green-600 text-white":"bg-card border border-border hover:bg-muted"}`,children:["Replied (",r.filter(s=>s.status==="replied").length,")"]})]})]}),e.jsx(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"space-y-4",children:h?e.jsxs("div",{className:"text-center py-12 bg-card rounded-2xl border border-border",children:[e.jsx("div",{className:"inline-block w-8 h-8 border-4 border-primary/30 border-t-primary rounded-full animate-spin mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading messages..."})]}):i.length===0?e.jsxs("div",{className:"text-center py-12 bg-card rounded-2xl border border-border",children:[e.jsx(v,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground mb-2",children:t||a!=="all"?"No messages found":"Belum ada pesan"})]}):i.map(s=>e.jsx(l.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:`bg-card rounded-2xl border p-6 ${s.status==="new"?"border-primary/50 bg-primary/5":"border-border"}`,children:e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:e.jsx(w,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("h4",{children:s.name}),e.jsxs("span",{className:`px-3 py-1 rounded-lg text-xs ${s.status==="new"?"bg-primary/10 text-primary":s.status==="read"?"bg-amber-500/10 text-amber-600":"bg-green-500/10 text-green-600"}`,children:[s.status==="new"&&"New",s.status==="read"&&"Read",s.status==="replied"&&"Replied"]})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-3 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(C,{className:"h-4 w-4"}),e.jsx("span",{children:s.email})]}),s.phone&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(k,{className:"h-4 w-4"}),e.jsx("span",{children:s.phone})]})]}),e.jsx("div",{className:"mb-4",children:e.jsx("span",{className:"px-3 py-1 bg-secondary/10 text-secondary rounded-lg text-sm",children:s.brand})}),e.jsx("div",{className:"bg-muted/50 rounded-xl p-4 mb-4",children:e.jsx("p",{className:"text-sm whitespace-pre-wrap",children:s.message})}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx(S,{className:"h-3 w-3"}),e.jsx("span",{children:new Date(s.created_at).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})})]})]}),e.jsxs("div",{className:"flex flex-col gap-2 ml-4",children:[e.jsxs("select",{value:s.status,onChange:d=>j(s.id,d.target.value),className:"px-3 py-2 bg-background border border-border rounded-lg text-sm min-w-[120px]",children:[e.jsx("option",{value:"new",children:"New"}),e.jsx("option",{value:"read",children:"Read"}),e.jsx("option",{value:"replied",children:"Replied"})]}),e.jsxs("button",{onClick:()=>g(s.id),className:"px-3 py-2 bg-red-50 dark:bg-red-950/20 hover:bg-red-100 dark:hover:bg-red-950/30 text-red-600 rounded-lg transition-colors flex items-center justify-center gap-2",title:"Delete",children:[e.jsx(L,{className:"h-4 w-4"}),e.jsx("span",{children:"Delete"})]})]})]})},s.id))}),i.length>0&&e.jsxs(l.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},className:"mt-6 text-center text-sm text-muted-foreground",children:["Showing ",i.length," of ",r.length," messages",(t||a!=="all")&&" (filtered)"]})]})})}export{F as MessagesManagement};
