import{j as e}from"./radix-ui-core-CVbt7vjv.js";import{h as M,c as t}from"./react-vendor-CF8XAmli.js";import{u as D}from"./useStore-meJn6iHo.js";import{S as E,m as b,b as $,A as z}from"./index-B7e89noG.js";import{c as I,Z as C,u as U,s as _,v as G,w as Q,r as X,n as Z,X as q}from"./other-ui-8Y7Mtx8D.js";import"./store-CYSJOfOf.js";import"./supabase-vendor-D5o4eRXO.js";import"./motion-vendor-gX53-bda.js";const P=["Semua Kondisi","Like New","Excellent","Good"];function re(){const B=M(),{products:h,loading:N}=D({autoFetch:!0}),f=["Semua Brand",...new Set(h.map(s=>s.category))].sort(),F=["Semua Lokasi",...new Set(h.map(s=>s.location))].sort(),[y,v]=t.useState(""),[l,c]=t.useState("Semua Brand"),[o,d]=t.useState("Semua Kondisi"),[g,u]=t.useState("Semua Lokasi"),[n,r]=t.useState([0,1e7]),[w,m]=t.useState(!1),[L,T]=t.useState([]),[k,R]=t.useState("relevant"),p=s=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(s),H=s=>s>=1e3?`${(s/1e3).toFixed(1)}rb`:s.toString(),A=s=>{T(a=>a.includes(s)?a.filter(i=>i!==s):[...a,s])},j=h.filter(s=>{const a=s.name.toLowerCase().includes(y.toLowerCase()),i=l==="Semua Brand"||s.category===l,x=o==="Semua Kondisi"||s.condition===o,O=g==="Semua Lokasi"||s.location.includes(g),S=s.discount_price||s.price,K=S>=n[0]&&S<=n[1];return a&&i&&x&&O&&K}).sort((s,a)=>{const i=s.discount_price||s.price,x=a.discount_price||a.price;switch(k){case"price-low":return i-x;case"price-high":return x-i;case"rating":return a.rating-s.rating;case"sold":return a.sold_count-s.sold_count;default:return 0}});return e.jsxs("div",{className:"min-h-screen bg-gray-50 pt-16",children:[e.jsx(E,{title:"Toko Handphone Second Berkualitas - Lapak Android",description:"Jual beli handphone second berkualitas, HP rooted, dan smartphone murah di Lapak Android. Bergaransi, gratis ongkir, dan terpercaya. Tersedia Samsung, Xiaomi, Oppo, dan brand lainnya.",keywords:"handphone second, hp bekas, smartphone murah, jual hp second, beli hp bekas, hp rooted, android second, lapak android store",canonicalUrl:"/store",ogType:"website"}),e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-600 text-white py-3",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"flex items-center justify-center gap-6 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{className:"h-4 w-4"}),e.jsx("span",{children:"Bergaransi"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{className:"h-4 w-4"}),e.jsx("span",{children:"Aman & Terpercaya"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{className:"h-4 w-4"}),e.jsx("span",{children:"Gratis Ongkir"})]})]})})}),e.jsx("div",{className:"bg-white border-b sticky top-16 z-40 shadow-sm",children:e.jsx("div",{className:"container mx-auto px-4 py-4",children:e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(_,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Cari handphone root impianmu...",value:y,onChange:s=>v(s.target.value),className:"w-full pl-12 pr-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-green-500 transition-colors"})]}),e.jsx("button",{className:"px-6 py-3 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors font-medium",children:"Cari"})]})})}),e.jsx("div",{className:"container mx-auto px-4 py-6",children:e.jsxs("div",{className:"flex gap-6",children:[e.jsx("div",{className:"hidden lg:block w-64 flex-shrink-0",children:e.jsxs("div",{className:"bg-white rounded-lg p-5 sticky top-32 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-5",children:[e.jsx("h3",{className:"font-semibold text-lg",children:"Filter"}),e.jsx("button",{onClick:()=>{c("Semua Brand"),d("Semua Kondisi"),u("Semua Lokasi"),r([0,1e7])},className:"text-sm text-green-600 hover:text-green-700",children:"Reset"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"font-medium mb-3 text-sm text-gray-700",children:"Brand"}),e.jsx("div",{className:"space-y-2",children:f.map(s=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[e.jsx("input",{type:"radio",name:"brand",checked:l===s,onChange:()=>c(s),className:"w-4 h-4 text-green-600 focus:ring-green-500"}),e.jsx("span",{className:"text-sm group-hover:text-green-600 transition-colors",children:s})]},s))})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"font-medium mb-3 text-sm text-gray-700",children:"Kondisi"}),e.jsx("div",{className:"space-y-2",children:P.map(s=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[e.jsx("input",{type:"radio",name:"condition",checked:o===s,onChange:()=>d(s),className:"w-4 h-4 text-green-600 focus:ring-green-500"}),e.jsx("span",{className:"text-sm group-hover:text-green-600 transition-colors",children:s})]},s))})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"font-medium mb-3 text-sm text-gray-700",children:"Lokasi"}),e.jsx("select",{value:g,onChange:s=>u(s.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:border-green-500",children:F.map(s=>e.jsx("option",{value:s,children:s},s))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-3 text-sm text-gray-700",children:"Rentang Harga"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("input",{type:"number",placeholder:"Min",value:n[0],onChange:s=>r([Number(s.target.value),n[1]]),className:"w-full px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:border-green-500"}),e.jsx("span",{className:"text-gray-400",children:"-"}),e.jsx("input",{type:"number",placeholder:"Max",value:n[1],onChange:s=>r([n[0],Number(s.target.value)]),className:"w-full px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:border-green-500"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>r([0,3e6]),className:"flex-1 px-3 py-1.5 text-xs border border-gray-200 rounded hover:border-green-500 hover:text-green-600 transition-colors",children:"< 3jt"}),e.jsx("button",{onClick:()=>r([3e6,5e6]),className:"flex-1 px-3 py-1.5 text-xs border border-gray-200 rounded hover:border-green-500 hover:text-green-600 transition-colors",children:"3-5jt"}),e.jsx("button",{onClick:()=>r([5e6,1e7]),className:"flex-1 px-3 py-1.5 text-xs border border-gray-200 rounded hover:border-green-500 hover:text-green-600 transition-colors",children:"> 5jt"})]})]})]})]})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"bg-white rounded-lg p-4 mb-4 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("button",{onClick:()=>m(!w),className:"lg:hidden flex items-center gap-2 px-4 py-2 border border-gray-200 rounded-lg hover:border-green-500 transition-colors",children:[e.jsx(G,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm",children:"Filter"})]}),e.jsxs("span",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium text-gray-900",children:j.length})," Produk"]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Urutkan:"}),e.jsxs("select",{value:k,onChange:s=>R(s.target.value),className:"px-4 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:border-green-500",children:[e.jsx("option",{value:"relevant",children:"Paling Sesuai"}),e.jsx("option",{value:"sold",children:"Terlaris"}),e.jsx("option",{value:"price-low",children:"Harga Terendah"}),e.jsx("option",{value:"price-high",children:"Harga Tertinggi"}),e.jsx("option",{value:"rating",children:"Rating Tertinggi"})]})]})]})}),N?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"inline-block w-8 h-8 border-4 border-green-500/30 border-t-green-500 rounded-full animate-spin mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Memuat produk..."})]}):e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-4",children:j.map(s=>e.jsxs(b.div,{layout:!0,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},onClick:()=>{$(s.id,s.name,"Store Page"),B(`/product/${s.id}`)},className:"bg-white rounded-lg overflow-hidden hover:shadow-lg transition-all duration-300 border border-gray-100 group cursor-pointer",children:[e.jsxs("div",{className:"relative aspect-square overflow-hidden bg-gray-100",children:[s.images&&s.images.length>0?e.jsx("img",{src:s.images[0],alt:s.name,className:`w-full h-full object-cover group-hover:scale-105 transition-transform duration-500 ${s.stock_status==="sold_out"?"opacity-50 grayscale":""}`}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:e.jsx(Q,{className:"h-12 w-12"})}),s.stock_status==="sold_out"&&e.jsx("div",{className:"absolute inset-0 bg-black/60 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-red-500 text-white px-6 py-3 rounded-lg font-bold text-lg transform rotate-[-15deg] shadow-xl",children:"SOLD OUT"}),e.jsx("p",{className:"text-white text-sm mt-2",children:"Stok Habis"})]})}),e.jsxs("div",{className:"absolute top-2 left-2 flex flex-col gap-1",children:[s.is_rooted&&e.jsxs("span",{className:"px-2 py-0.5 bg-green-500 text-white text-xs font-medium rounded flex items-center gap-1",children:[e.jsx(C,{className:"h-3 w-3"}),"Rooted"]}),s.stock_status==="low_stock"&&e.jsx("span",{className:"px-2 py-0.5 bg-orange-500 text-white text-xs font-medium rounded",children:"Stok Terbatas"})]}),e.jsx("button",{onClick:a=>{a.stopPropagation(),A(s.id)},className:"absolute top-2 right-2 p-1.5 bg-white rounded-full shadow-md hover:scale-110 transition-transform",children:e.jsx(X,{className:`h-4 w-4 ${L.includes(s.id)?"fill-red-500 text-red-500":"text-gray-400"}`})}),s.discount_price&&s.discount_price>0&&e.jsxs("div",{className:"absolute bottom-2 left-2 px-2 py-0.5 bg-yellow-400 text-xs font-bold rounded",children:[Math.round((1-s.discount_price/s.price)*100),"% OFF"]})]}),e.jsxs("div",{className:"p-3",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 line-clamp-2 mb-2 min-h-[40px]",children:s.name}),e.jsx("div",{className:"mb-2",children:s.discount_price&&s.discount_price>0?e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"px-3 py-1 bg-green-500/10 text-green-600 rounded-lg text-xs font-medium",children:"PROMO"}),e.jsx("span",{className:"text-lg font-bold text-green-600",children:p(s.discount_price)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"px-3 py-1 bg-gray-500/10 text-gray-600 rounded-lg text-xs font-medium",children:"Harga Asli"}),e.jsx("span",{className:"text-xs text-gray-400 line-through",children:p(s.price)})]})]}):e.jsx("div",{className:"text-lg font-bold text-gray-900",children:p(s.price)})}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 mb-2",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Z,{className:"h-3 w-3"}),e.jsx("span",{className:"truncate",children:s.location})]}),e.jsxs("span",{children:[H(s.sold_count||0)," terjual"]})]})]})]},s.id))}),!N&&j.length===0&&e.jsxs("div",{className:"bg-white rounded-lg p-12 text-center",children:[e.jsx("div",{className:"w-24 h-24 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center",children:e.jsx(_,{className:"h-12 w-12 text-gray-400"})}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Produk tidak ditemukan"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Coba ubah kata kunci atau filter pencarian Anda"}),e.jsx("button",{onClick:()=>{v(""),c("Semua Brand"),d("Semua Kondisi"),u("Semua Lokasi"),r([0,1e7])},className:"px-6 py-3 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors",children:"Reset Semua Filter"})]})]})]})}),e.jsx(z,{children:w&&e.jsx(b.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-50 lg:hidden",onClick:()=>m(!1),children:e.jsxs(b.div,{initial:{x:"-100%"},animate:{x:0},exit:{x:"-100%"},transition:{type:"tween"},className:"absolute left-0 top-0 bottom-0 w-80 bg-white p-6 overflow-y-auto",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Filter"}),e.jsx("button",{onClick:()=>m(!1),children:e.jsx(q,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-3",children:"Brand"}),e.jsx("div",{className:"space-y-2",children:f.map(s=>e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",name:"brand-mobile",checked:l===s,onChange:()=>c(s),className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"text-sm",children:s})]},s))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-3",children:"Kondisi"}),e.jsx("div",{className:"space-y-2",children:P.map(s=>e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",name:"condition-mobile",checked:o===s,onChange:()=>d(s),className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"text-sm",children:s})]},s))})]}),e.jsx("button",{onClick:()=>m(!1),className:"w-full py-3 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors",children:"Terapkan Filter"})]})]})})})]})}export{re as StorePage};
