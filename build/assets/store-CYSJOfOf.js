import{s as a}from"./index-B7e89noG.js";const c={async getAll(r){let t=a.from("products").select("*").order("created_at",{ascending:!1});r?.category&&(t=t.eq("category",r.category)),r?.condition&&(t=t.eq("condition",r.condition)),r?.limit&&(t=t.limit(r.limit));const{data:e,error:o}=await t;if(o)throw o;return e},async getById(r){const{data:t,error:e}=await a.from("products").select("*").eq("id",r).maybeSingle();if(e)throw e;if(!t)throw new Error("Product not found");return t},async create(r){const{data:t,error:e}=await a.from("products").insert([{...r,sold_count:0,rating:0}]).select().maybeSingle();if(e)throw e;if(!t)throw new Error("Failed to create product (check RLS policies)");return t},async update(r,t){const{data:e,error:o}=await a.from("products").update({...t,updated_at:new Date().toISOString()}).eq("id",r).select().maybeSingle();if(o)throw o;if(!e)throw new Error("Product not found or permission denied (check RLS policies)");return e},async delete(r){const{error:t}=await a.from("products").delete().eq("id",r);if(t)throw t}};export{c as s};
